(self.webpackChunk_N_E=self.webpackChunk_N_E||[]).push([[69],{809:function(e,t,n){(window.__NEXT_P=window.__NEXT_P||[]).push(["/monitor",function(){return n(8118)}])},8118:function(e,t,n){"use strict";n.r(t),n.d(t,{default:function(){return N}});var r=n(5893),l=n(7294),i=n(6336),a=n(9630),o=n(1953),s=n(2722),c=n(8661),d=n(9465),h=n(4246),p=n(8316),f=n(7056),x=n(5343),u=n(2012),m=n(1448),Z=n(244),b=n(9807),j=n(5605),g=n(3978),v=n(9417);let y=e=>{let t=e.split(/\n|\r\n/),n={};return t.forEach(e=>{if(/(^\s+)?#/.test(e))return;let[t,r]=e.split(/\s+/);t&&(n[t]=Number(r))}),n};function w(e){let{children:t,value:n,index:l,...i}=e;return(0,r.jsx)("div",{role:"tabpanel",hidden:n!==l,id:"vertical-tabpanel-".concat(l),"aria-labelledby":"vertical-tab-".concat(l),...i,children:n===l&&(0,r.jsx)(o.Z,{sx:{p:3},children:(0,r.jsx)(a.Z,{children:t})})})}function k(e){return{id:"vertical-tab-".concat(e),"aria-controls":"vertical-tabpanel-".concat(e)}}let C={PaperProps:{style:{maxHeight:224,width:1e3}}};function N(){var e;let[t,n]=l.useState(""),[N,O]=l.useState([]),[S,_]=l.useState(0),W=(e,t)=>{_(t)},T=l.useCallback(async()=>{let e=await fetch("/metrics"),t=await e.text();n(t);let r=y(t),l=[{time:Date.now(),data:r}].concat(N).slice(0,240);O(l)},[N]);l.useEffect(()=>{T();let e=setInterval(()=>{T()},3e4);return()=>clearInterval(e)},[]);let[E,P]=l.useState([]),A=e=>{let{target:{value:t}}=e;P("string"==typeof t?t.split(","):t)},M=N[0],R=Object.keys(null!==(e=null==M?void 0:M.data)&&void 0!==e?e:{});return(0,r.jsxs)(r.Fragment,{children:[(0,r.jsx)(d.Z,{}),(0,r.jsx)(i.Z,{maxWidth:"lg",children:(0,r.jsxs)(o.Z,{sx:{my:4},children:[(0,r.jsx)(a.Z,{variant:"h4",component:"h1",gutterBottom:!0,children:"Caddy Server Metrics"}),(0,r.jsxs)(o.Z,{sx:{flexGrow:1,bgcolor:"background.paper",display:"flex",height:224},children:[(0,r.jsxs)(s.Z,{orientation:"vertical",variant:"scrollable",value:S,onChange:W,"aria-label":"Vertical tabs example",sx:{borderRight:1,borderColor:"divider",minWidth:100},children:[(0,r.jsx)(c.Z,{label:"Raw",...k(0)}),(0,r.jsx)(c.Z,{label:"Parsed",...k(1)}),(0,r.jsx)(c.Z,{label:"Metric",...k(2)})]}),(0,r.jsx)(w,{value:S,index:0,children:(0,r.jsx)("pre",{children:t})}),(0,r.jsx)(w,{value:S,index:1,children:(0,r.jsx)("pre",{children:JSON.stringify(N[0],null,4)})}),(0,r.jsxs)(w,{value:S,index:2,children:[(0,r.jsx)("div",{children:(0,r.jsxs)(x.Z,{sx:{m:1,width:800},children:[(0,r.jsx)(p.Z,{id:"demo-multiple-chip-label",children:"Select Metric"}),(0,r.jsx)(u.Z,{labelId:"demo-multiple-chip-label",id:"demo-multiple-chip",multiple:!0,value:E,onChange:A,input:(0,r.jsx)(h.Z,{id:"select-multiple-chip",label:"Chip"}),renderValue:e=>(0,r.jsx)(o.Z,{sx:{display:"flex",flexWrap:"wrap",gap:.5},children:e.map(e=>(0,r.jsx)(m.Z,{label:e},e))}),MenuProps:C,children:R.map(e=>(0,r.jsx)(f.Z,{value:e,style:{fontWeight:-1===E.indexOf(e)?"normal":"500"},children:e},e))})]})}),(0,r.jsxs)(Z.Z,{sx:{minWidth:800},"aria-label":"simple table",children:[(0,r.jsx)(g.Z,{children:(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(j.Z,{children:"time"}),E.map(e=>(0,r.jsx)(j.Z,{children:e},"m-".concat(e)))]})}),(0,r.jsx)(b.Z,{children:N.map(e=>(0,r.jsxs)(v.Z,{children:[(0,r.jsx)(j.Z,{children:new Date(e.time).toISOString()}),E.map(t=>(0,r.jsx)(j.Z,{children:e.data[t]},"t-".concat(e.time,"-").concat(t)))]},"t-".concat(e.time)))})]})]})]})]})})]})}},9465:function(e,t,n){"use strict";n.d(t,{Z:function(){return A}});var r=n(7297),l=n(5944),i=n(917),a=n(7294),o=n(5050),s=n(1953),c=n(784),d=n(562),h=n(9630),p=n(9934),f=n(326),x=n(6336),u=n(5084),m=n(7056),Z=n(3960),b=n(5893),j=n(5697),g=n.n(j),v=n(6010),y=n(1163),w=n(1664),k=n.n(w),C=n(8346),N=n(1719);let O=(0,N.ZP)("a")({}),S=a.forwardRef(function(e,t){let{to:n,linkAs:r,replace:l,scroll:i,shallow:a,prefetch:o,locale:s,...c}=e;return(0,b.jsx)(k(),{href:n,prefetch:o,as:r,replace:l,scroll:i,shallow:a,passHref:!0,locale:s,children:(0,b.jsx)(O,{ref:t,...c})})});S.propTypes={href:g().any,linkAs:g().oneOfType([g().object,g().string]),locale:g().string,passHref:g().bool,prefetch:g().bool,replace:g().bool,scroll:g().bool,shallow:g().bool,to:g().oneOfType([g().object,g().string]).isRequired};let _=a.forwardRef(function(e,t){let{activeClassName:n="active",as:r,className:l,href:i,linkAs:a,locale:o,noLinkStyle:s,prefetch:c,replace:d,role:h,scroll:p,shallow:f,...x}=e,u=(0,y.useRouter)(),m="string"==typeof i?i:i.pathname,Z=(0,v.Z)(l,{[n]:u.pathname===m&&n}),j="string"==typeof i&&(0===i.indexOf("http")||0===i.indexOf("mailto:"));if(j)return s?(0,b.jsx)(O,{className:Z,href:i,ref:t,...x}):(0,b.jsx)(C.Z,{className:Z,href:i,ref:t,...x});let g={to:i,linkAs:a||r,replace:d,scroll:p,shallow:f,prefetch:c,locale:o};return s?(0,b.jsx)(S,{className:Z,ref:t,...g,...x}):(0,b.jsx)(C.Z,{component:S,className:Z,ref:t,...g,...x})});function W(){let e=(0,r.Z)(["\n                      color: white;\n                    "]);return W=function(){return e},e}function T(){let e=(0,r.Z)(["\n                    color: white;\n                  "]);return T=function(){return e},e}_.propTypes={activeClassName:g().string,as:g().oneOfType([g().object,g().string]),className:g().string,href:g().any,linkAs:g().oneOfType([g().object,g().string]),locale:g().string,noLinkStyle:g().bool,prefetch:g().bool,replace:g().bool,role:g().string,scroll:g().bool,shallow:g().bool};let E=[{name:"Upstream",href:"/upstream"},{name:"PKI",href:"/pki-view"},{name:"Load",href:"/setup"},{name:"Adapt",href:"/convert-config"},{name:"Metrics",href:"/monitor"}],P=()=>{let[e,t]=a.useState(null),n=e=>{t(e.currentTarget)},r=()=>{t(null)};return(0,l.tZ)(o.Z,{position:"static",children:(0,l.tZ)(x.Z,{maxWidth:"lg",children:(0,l.BX)(c.Z,{disableGutters:!0,children:[(0,l.tZ)(Z.Z,{sx:{display:{xs:"none",md:"flex"},mr:1}}),(0,l.tZ)(h.Z,{variant:"h6",noWrap:!0,component:"a",href:"/",sx:{mr:2,display:{xs:"none",md:"flex"},fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"Caddy Config"}),(0,l.BX)(s.Z,{sx:{flexGrow:1,display:{xs:"flex",md:"none"}},children:[(0,l.tZ)(d.Z,{size:"large","aria-label":"account of current user","aria-controls":"menu-appbar","aria-haspopup":"true",onClick:n,color:"inherit",children:(0,l.tZ)(f.Z,{})}),(0,l.tZ)(p.Z,{id:"menu-appbar",anchorEl:e,anchorOrigin:{vertical:"bottom",horizontal:"left"},keepMounted:!0,transformOrigin:{vertical:"top",horizontal:"left"},open:Boolean(e),onClose:r,sx:{display:{xs:"block",md:"none"}},children:E.map(e=>(0,l.tZ)(m.Z,{onClick:r,children:(0,l.tZ)(_,{href:e.href,css:(0,i.iv)(W()),children:(0,l.tZ)(h.Z,{textAlign:"center",children:e.name})})},e.name))})]}),(0,l.tZ)(Z.Z,{sx:{display:{xs:"flex",md:"none"},mr:1}}),(0,l.tZ)(h.Z,{variant:"h5",noWrap:!0,component:"a",href:"",sx:{mr:2,display:{xs:"flex",md:"none"},flexGrow:1,fontFamily:"monospace",fontWeight:700,letterSpacing:".3rem",color:"inherit",textDecoration:"none"},children:"Caddy Config"}),(0,l.tZ)(s.Z,{sx:{flexGrow:1,display:{xs:"none",md:"flex"}},children:E.map(e=>(0,l.tZ)(u.Z,{onClick:r,sx:{my:2,color:"white",display:"block"},children:(0,l.tZ)(_,{href:e.href,css:(0,i.iv)(T()),children:e.name})},e.name))})]})})})};var A=P}},function(e){e.O(0,[514,512,774,888,179],function(){return e(e.s=809)}),_N_E=e.O()}]);